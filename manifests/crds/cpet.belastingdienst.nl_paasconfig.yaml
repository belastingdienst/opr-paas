---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.14.0
  name: paasconfig.cpet.belastingdienst.nl
spec:
  group: cpet.belastingdienst.nl
  names:
    kind: PaasConfig
    listKind: PaasConfigList
    plural: paasconfig
    singular: paasconfig
  scope: Cluster
  versions:
  - name: v1alpha1
    schema:
      openAPIV3Schema:
        properties:
          apiVersion:
            description: |-
              APIVersion defines the versioned schema of this representation of an object.
              Servers should convert recognized schemas to the latest internal value, and
              may reject unrecognized values.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources
            type: string
          kind:
            description: |-
              Kind is a string value representing the REST resource this object represents.
              Servers may infer this from the endpoint the client submits requests to.
              Cannot be updated.
              In CamelCase.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds
            type: string
          metadata:
            type: object
          spec:
            properties:
              applicationset_namespace:
                default: argocd
                description: Namespace in which ArgoCD applicationSets will be found
                  for managing capabilities
                type: string
              argopermissions:
                description: Permissions to set for ArgoCD instance
                properties:
                  default_policy:
                    description: The optional default policy which is set in the ArgoCD
                      instance
                    type: string
                  header:
                    description: The header value to set in ArgoPermissions
                    type: string
                  resource_name:
                    description: The name of the ArgoCD instance to apply ArgoPermissions
                      to
                    type: string
                  role:
                    description: The name of the role to add to Groups set in ArgoPermissions
                    type: string
                required:
                - header
                - resource_name
                - role
                type: object
              capabilities:
                additionalProperties:
                  properties:
                    applicationset:
                      description: Name of the ArgoCD ApplicationSet which manages
                        this capability
                      type: string
                    default_permissions:
                      additionalProperties:
                        items:
                          type: string
                        type: array
                      description: Default permissions set for this capability
                      type: object
                    extra_permissions:
                      additionalProperties:
                        items:
                          type: string
                        type: array
                      description: Extra permissions set for this capability
                      type: object
                    quotas:
                      description: Quota settings for this capability
                      properties:
                        clusterwide:
                          description: Is this a clusterwide quota or not
                          type: boolean
                        defaults:
                          additionalProperties:
                            type: string
                          description: The default quota which the enabled capability
                            gets
                          type: object
                        max:
                          additionalProperties:
                            type: string
                          description: The maximum quota which the capability gets
                          type: object
                        min:
                          additionalProperties:
                            type: string
                          description: The minimum quota which the enabled capability
                            gets
                          type: object
                        ratio:
                          description: The ratio of the requested quota which will
                            be applied to the total quota
                          format: int64
                          type: integer
                      required:
                      - clusterwide
                      - defaults
                      - max
                      - min
                      - ratio
                      type: object
                  required:
                  - applicationset
                  - default_permissions
                  - extra_permissions
                  - quotas
                  type: object
                description: A map with zero or more ConfigCapability
                type: object
              debug:
                default: false
                description: Enable debug information generation or not
                type: boolean
              decryptKeyPaths:
                description: Paths where the manager can find the decryptKeys to decrypt
                  Paas'es
                items:
                  type: string
                minItems: 1
                type: array
              exclude_appset_name:
                description: Name of an ApplicationSet to be set as ignored in the
                  ArgoCD bootstrap Application
                type: string
              ldap:
                description: LDAP configuration for the operator to add to Groups
                properties:
                  host:
                    description: LDAP server hostname
                    type: string
                  port:
                    description: LDAP server port
                    format: int32
                    type: integer
                required:
                - host
                - port
                type: object
              managed_by_label:
                default: argocd.argoproj.io/managed-by
                description: Name of the label used to define by whom the resource
                  is managed.
                type: string
              quota_label:
                default: clusterquotagroup
                description: Label which is added to clusterquotas
                type: string
              requestor_label:
                default: requestor
                description: Name of the label used to define who is the contact for
                  this resource
                type: string
              rolemappings:
                additionalProperties:
                  items:
                    type: string
                  type: array
                description: Grant permissions to all groups according to config in
                  configmap and role selected per group in paas.
                type: object
              whitelist:
                description: A reference to a configmap containing a whitelist of
                  LDAP groups to be synced using LDAP sync
                properties:
                  name:
                    type: string
                  namespace:
                    type: string
                required:
                - name
                - namespace
                type: object
            required:
            - capabilities
            - decryptKeyPaths
            - exclude_appset_name
            - whitelist
            type: object
          status:
            properties:
              messages:
                description: 'Important: Run "make" to regenerate code after modifying
                  this file'
                items:
                  type: string
                type: array
            type: object
        type: object
    served: true
    storage: true
    subresources:
      status: {}
